{"version":3,"file":"core.cjs.development.js","sources":["../src/components/Accessibility/defaults.ts","../src/store/actions.ts","../src/utilities/other/getValueIndex.ts","../src/utilities/other/noop.ts","../src/utilities/other/omit.ts","../src/store/context.ts","../src/utilities/coordinates/centerOfRectangle.ts","../src/utilities/coordinates/constants.ts","../src/utilities/coordinates/distanceBetweenPoints.ts","../src/utilities/event/isTouchEvent.ts","../src/utilities/event/isMouseEvent.ts","../src/utilities/coordinates/getEventCoordinates.ts","../src/utilities/coordinates/getRelativeTransformOrigin.ts","../src/utilities/algorithms/closestCenter.ts","../src/utilities/rect/adjustScale.ts","../src/utilities/rect/getRectDelta.ts","../src/utilities/rect/rectAdjustment.ts","../src/utilities/scroll/isScrollable.ts","../src/utilities/position/isFixed.ts","../src/utilities/scroll/getScrollableAncestors.ts","../src/utilities/scroll/getScrollableElement.ts","../src/utilities/scroll/getScrollCoordinates.ts","../src/types/direction.ts","../src/utilities/scroll/getScrollPosition.ts","../src/utilities/scroll/documentScrollingElement.ts","../src/utilities/scroll/getScrollDirectionAndSpeed.ts","../src/utilities/scroll/getScrollOffsets.ts","../src/utilities/rect/getRect.ts","../src/utilities/rect/isViewRect.ts","../src/utilities/algorithms/closestCorners.ts","../src/utilities/algorithms/rectIntersection.ts","../src/utilities/document/getOwnerDocument.ts","../src/store/reducer.ts","../src/components/Accessibility/Accessibility.tsx","../src/hooks/utilities/useAutoScroller.ts","../src/hooks/utilities/useCachedNode.ts","../src/hooks/utilities/useCombineActivators.ts","../src/hooks/utilities/useFindElementFromPoint.ts","../src/hooks/utilities/useLayoutRectMap.ts","../src/hooks/utilities/useScrollOffsets.ts","../src/hooks/utilities/useScrollableAncestors.ts","../src/hooks/utilities/useSyntheticListeners.ts","../src/hooks/utilities/useRect.ts","../src/sensors/useSensor.ts","../src/sensors/useSensors.ts","../src/sensors/utilities/Listeners.ts","../src/sensors/utilities/getEventListenerTarget.ts","../src/sensors/keyboard/types.ts","../src/sensors/keyboard/defaults.ts","../src/sensors/keyboard/KeyboardSensor.ts","../src/sensors/pointer/AbstractPointerSensor.ts","../src/sensors/pointer/PointerSensor.ts","../src/sensors/mouse/MouseSensor.ts","../src/sensors/touch/TouchSensor.ts","../src/modifiers/applyModifiers.ts","../src/components/DndContext/DndContext.tsx","../src/hooks/useDraggable.ts","../src/hooks/useDndContext.ts","../src/hooks/useDroppable.ts","../src/components/DragOverlay/hooks/useDerivedTransform.ts","../src/components/DragOverlay/hooks/useDropAnimation.ts","../src/components/DragOverlay/DragOverlay.tsx"],"sourcesContent":["import {Announcements, ScreenReaderInstructions} from './types';\n\nexport const screenReaderInstructions: ScreenReaderInstructions = {\n  draggable: `\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  `,\n};\n\nexport const defaultAnnouncements: Announcements = {\n  onDragStart(id) {\n    return `Picked up draggable item ${id}.`;\n  },\n  onDragOver(id, overId) {\n    if (overId) {\n      return `Draggable item ${id} was moved over droppable area ${overId}.`;\n    }\n\n    return `Draggable item ${id} is no longer over a droppable area.`;\n  },\n  onDragEnd(id, overId) {\n    if (overId) {\n      return `Draggable item ${id} was dropped over droppable area ${overId}`;\n    }\n\n    return `Draggable item ${id} was dropped.`;\n  },\n  onDragCancel(id) {\n    return `Dragging was cancelled. Draggable item ${id} was dropped.`;\n  },\n};\n","import type {Coordinates, UniqueIdentifier} from '../types';\nimport type {DroppableContainer} from './types';\n\nexport enum Action {\n  DragStart = 'dragStart',\n  DragMove = 'dragMove',\n  DragEnd = 'dragEnd',\n  DragCancel = 'dragCancel',\n  RegisterDroppable = 'registerDroppable',\n  SetDroppableDisabled = 'setDroppableDisabled',\n  UnregisterDroppable = 'unregisterDroppable',\n}\n\nexport type Actions =\n  | {\n      type: Action.DragStart;\n      active: UniqueIdentifier;\n      initialCoordinates: Coordinates;\n    }\n  | {type: Action.DragMove; coordinates: Coordinates}\n  | {type: Action.DragEnd}\n  | {type: Action.DragCancel}\n  | {\n      type: Action.RegisterDroppable;\n      element: DroppableContainer;\n    }\n  | {\n      type: Action.SetDroppableDisabled;\n      id: UniqueIdentifier;\n      disabled: boolean;\n    }\n  | {\n      type: Action.UnregisterDroppable;\n      id: UniqueIdentifier;\n    };\n","export const getMaxValueIndex = (array: number[]) =>\n  getValueIndex(array, (value, tracked) => value > tracked);\n\nexport const getMinValueIndex = (array: number[]) =>\n  getValueIndex(array, (value, tracked) => value < tracked);\n\n/**\n * Returns the index of the smallest number in an array of numbers\n */\nexport function getValueIndex(\n  array: number[],\n  comparator: (value: number, tracked: number) => boolean\n) {\n  if (array.length === 0) {\n    return -1;\n  }\n\n  let tracked = array[0];\n  let index = 0;\n\n  for (var i = 1; i < array.length; i++) {\n    if (comparator(array[i], tracked)) {\n      index = i;\n      tracked = array[i];\n    }\n  }\n\n  return index;\n}\n","export function noop(..._args: any) {}\n","export function omit<T>(id: string, elements: Record<string, T>) {\n  const {[id]: _, ...other} = elements;\n\n  return other;\n}\n","import {createContext} from 'react';\n\nimport {noop} from '../utilities/other';\nimport {DndContextDescriptor} from './types';\n\nexport const Context = createContext<DndContextDescriptor>({\n  activatorEvent: null,\n  active: null,\n  activeNode: null,\n  activeNodeRect: null,\n  activeNodeClientRect: null,\n  activators: [],\n  ariaDescribedById: {\n    draggable: '',\n  },\n  overlayNode: {\n    nodeRef: {\n      current: null,\n    },\n    rect: null,\n    setRef: noop,\n  },\n  containerNodeRect: null,\n  dispatch: noop,\n  draggableNodes: {},\n  droppableRects: new Map(),\n  droppableContainers: {},\n  over: null,\n  scrollableAncestors: [],\n  scrollableAncestorRects: [],\n  recomputeLayouts: noop,\n  windowRect: null,\n  willRecomputeLayouts: false,\n});\n","import type {Coordinates, LayoutRect} from '../../types';\n\n/**\n * Returns the coordinates of the center of a given ClientRect\n */\nexport function centerOfRectangle(\n  rect: LayoutRect,\n  left = rect.offsetLeft,\n  top = rect.offsetTop\n): Coordinates {\n  return {\n    x: left + rect.width * 0.5,\n    y: top + rect.height * 0.5,\n  };\n}\n","import {Coordinates} from '../../types';\n\nexport const defaultCoordinates: Coordinates = Object.freeze({\n  x: 0,\n  y: 0,\n});\n","import {Coordinates} from '../../types';\n\n/**\n * Returns the distance between two points\n */\nexport function distanceBetween(p1: Coordinates, p2: Coordinates) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n}\n","export function isTouchEvent(event: Event): event is TouchEvent {\n  return window?.TouchEvent && event instanceof TouchEvent;\n}\n","export function isMouseEvent(event: Event): event is MouseEvent {\n  return (\n    (window?.MouseEvent && event instanceof MouseEvent) ||\n    event.type.includes('mouse')\n  );\n}\n","import {Coordinates} from '../../types';\nimport {isMouseEvent, isTouchEvent} from '../event';\n\n/**\n * Returns the normalized x and y coordinates for mouse and touch events.\n */\nexport function getEventCoordinates(event: Event): Coordinates {\n  if (isTouchEvent(event)) {\n    if (event.touches && event.touches.length) {\n      const {clientX: x, clientY: y} = event.touches[0];\n\n      return {\n        x,\n        y,\n      };\n    } else if (event.changedTouches && event.changedTouches.length) {\n      const {clientX: x, clientY: y} = event.changedTouches[0];\n\n      return {\n        x,\n        y,\n      };\n    }\n  }\n\n  if (isMouseEvent(event)) {\n    return {\n      x: event.clientX,\n      y: event.clientY,\n    };\n  }\n\n  return {\n    x: 0,\n    y: 0,\n  };\n}\n","import {getEventCoordinates} from './getEventCoordinates';\n\nexport function getRelativeTransformOrigin(\n  event: MouseEvent | TouchEvent | KeyboardEvent,\n  rect: ClientRect\n) {\n  if (event instanceof KeyboardEvent) {\n    return '0 0';\n  }\n\n  const eventCoordinates = getEventCoordinates(event);\n  const transformOrigin = {\n    x: ((eventCoordinates.x - rect.left) / rect.width) * 100,\n    y: ((eventCoordinates.y - rect.top) / rect.height) * 100,\n  };\n\n  return `${transformOrigin.x}% ${transformOrigin.y}%`;\n}\n","import {getMinValueIndex} from '../other';\nimport {centerOfRectangle, distanceBetween} from '../coordinates';\nimport type {CollisionDetection} from './types';\n\n/**\n * Returns the closest rectangle from an array of rectangles to the center of a given\n * rectangle.\n */\nexport const closestCenter: CollisionDetection = (rects, rect) => {\n  const centerRect = centerOfRectangle(rect, rect.left, rect.top);\n  const distances = rects.map(([_, rect]) =>\n    distanceBetween(centerOfRectangle(rect), centerRect)\n  );\n\n  const minValueIndex = getMinValueIndex(distances);\n\n  return rects[minValueIndex] ? rects[minValueIndex][0] : null;\n};\n","import type {Transform} from '@dnd-kit/utilities';\nimport type {LayoutRect} from '../../types';\n\nexport function adjustScale(\n  transform: Transform,\n  rect1: LayoutRect | null,\n  rect2: LayoutRect | null\n): Transform {\n  return {\n    ...transform,\n    scaleX: rect1 && rect2 ? rect1.width / rect2.width : 1,\n    scaleY: rect1 && rect2 ? rect1.height / rect2.height : 1,\n  };\n}\n","import type {Coordinates, ViewRect} from '../../types';\nimport {defaultCoordinates} from '../coordinates';\n\nexport function getRectDelta(\n  rect1: ViewRect | null,\n  rect2: ViewRect | null\n): Coordinates {\n  return rect1 && rect2\n    ? {\n        x: rect1.left - rect2.left,\n        y: rect1.top - rect2.top,\n      }\n    : defaultCoordinates;\n}\n","import {Coordinates, ViewRect} from '../../types';\n\nexport function createRectAdjustmentFn(modifier: number) {\n  return function adjustViewRect(\n    viewRect: ViewRect,\n    ...adjustments: Coordinates[]\n  ): ViewRect {\n    return adjustments.reduce<ViewRect>(\n      (acc, adjustment) => ({\n        ...acc,\n        top: acc.top + modifier * adjustment.y,\n        bottom: acc.bottom + modifier * adjustment.y,\n        left: acc.left + modifier * adjustment.x,\n        right: acc.right + modifier * adjustment.x,\n        offsetLeft: acc.offsetLeft + modifier * adjustment.x,\n        offsetTop: acc.offsetTop + modifier * adjustment.y,\n      }),\n      {...viewRect}\n    );\n  };\n}\n\nexport const getAdjustedRect = createRectAdjustmentFn(1);\n","export function isScrollable(node: HTMLElement): boolean {\n  const computedStyle = window.getComputedStyle(node);\n  const overflowRegex = /(auto|scroll)/;\n  const properties = ['overflow', 'overflowX', 'overflowY'];\n\n  return (\n    properties.find((property) => {\n      const value = computedStyle[property as keyof CSSStyleDeclaration];\n\n      return typeof value === 'string' ? overflowRegex.test(value) : false;\n    }) != null\n  );\n}\n","export const isFixed = (elem: HTMLElement) => {\n    let currentElement: HTMLElement | null = elem\n    let fixed = false\n    while (currentElement) {\n        fixed = currentElement?.style.position === 'fixed'\n        if (fixed) {\n            break\n        }\n        currentElement = currentElement?.parentElement\n    }\n\n    return fixed\n}","import { isScrollable } from './isScrollable';\nimport { isFixed } from '../position/isFixed'\n\nexport function getScrollableAncestors(element: Node | null): Element[] {\n  const scrollParents: Element[] = [];\n\n  function findScrollableAncestors(node: Node | null): Element[] {\n    if (!node) {\n      return scrollParents;\n    }\n\n    if (node instanceof Document && node.scrollingElement != null) {\n      scrollParents.push(node.scrollingElement);\n\n      return scrollParents;\n    }\n\n    if (!(node instanceof HTMLElement) || node instanceof SVGElement) {\n      return scrollParents;\n    }\n\n    if (isScrollable(node)) {\n      // crazy stupid hotfix for positioning issue under fixed scroll ancestors. get offsetTop of the first ancestor only(!)\n      if (node && isFixed(node)) {\n        return [node]\n      }\n      scrollParents.push(node);\n    }\n\n    return findScrollableAncestors(node.parentNode);\n  }\n\n  return element ? findScrollableAncestors(element) : scrollParents;\n}\n","import {canUseDOM} from '@dnd-kit/utilities';\n\nexport function getScrollableElement(element: EventTarget | null) {\n  if (!canUseDOM) {\n    return null;\n  }\n\n  if (element === document.scrollingElement || element instanceof Document) {\n    return window;\n  }\n\n  if (element instanceof HTMLElement) {\n    return element;\n  }\n\n  return null;\n}\n","import {Coordinates} from '../../types';\n\nexport function getScrollCoordinates(\n  element: Element | typeof window\n): Coordinates {\n  if (element instanceof Window) {\n    return {\n      x: element.scrollX,\n      y: element.scrollY,\n    };\n  }\n\n  return {\n    x: element.scrollLeft,\n    y: element.scrollTop,\n  };\n}\n","export enum Direction {\n  Forward = 1,\n  Backward = -1,\n}\n","function getScrollElementRect(element: Element) {\n  if (element === document.scrollingElement) {\n    const {innerWidth, innerHeight} = window;\n\n    return {\n      top: 0,\n      left: 0,\n      right: innerWidth,\n      bottom: innerHeight,\n      width: innerWidth,\n      height: innerHeight,\n    };\n  }\n\n  return element.getBoundingClientRect();\n}\n\nexport function getScrollPosition(scrollingContainer: Element) {\n  const scrollElementRect = getScrollElementRect(scrollingContainer);\n  const minScroll = {\n    x: 0,\n    y: 0,\n  };\n  const maxScroll = {\n    x: scrollingContainer.scrollWidth - scrollElementRect.width,\n    y: scrollingContainer.scrollHeight - scrollElementRect.height,\n  };\n\n  const isTop = scrollingContainer.scrollTop <= minScroll.y;\n  const isLeft = scrollingContainer.scrollLeft <= minScroll.x;\n  const isBottom = scrollingContainer.scrollTop >= maxScroll.y;\n  const isRight = scrollingContainer.scrollLeft >= maxScroll.x;\n\n  return {\n    isTop,\n    isLeft,\n    isBottom,\n    isRight,\n    scrollElementRect,\n    maxScroll,\n    minScroll,\n  };\n}\n","import {canUseDOM} from '@dnd-kit/utilities';\n\nexport function isDocumentScrollingElement(element: Element | null) {\n  if (!canUseDOM || !element) {\n    return false;\n  }\n\n  return element === document.scrollingElement;\n}\n","import {Direction, ViewRect} from '../../types';\nimport {getScrollPosition} from './getScrollPosition';\nimport {isDocumentScrollingElement} from './documentScrollingElement';\n\nexport function getScrollDirectionAndSpeed(\n  scrollContainer: Element,\n  scrollContainerRect: ViewRect,\n  rect: ViewRect,\n  acceleration = 10\n) {\n  const {clientHeight, clientWidth} = scrollContainer;\n  const finalScrollContainerRect = isDocumentScrollingElement(scrollContainer)\n    ? {\n        top: 0,\n        left: 0,\n        right: clientWidth,\n        bottom: clientHeight,\n      }\n    : scrollContainerRect;\n  const {isTop, isBottom, isLeft, isRight} = getScrollPosition(scrollContainer);\n  const {width, height, left, top, bottom, right} = rect;\n  const direction = {\n    x: 0,\n    y: 0,\n  };\n  const speed = {\n    x: 0,\n    y: 0,\n  };\n\n  if (!isTop && top <= finalScrollContainerRect.top + height) {\n    // Scroll Up\n    direction.y = Direction.Backward;\n    speed.y =\n      acceleration *\n      Math.abs((top - height - finalScrollContainerRect.top) / height);\n  } else if (!isBottom && bottom >= finalScrollContainerRect.bottom - height) {\n    // Scroll Down\n    direction.y = Direction.Forward;\n    speed.y =\n      acceleration *\n      Math.abs((finalScrollContainerRect.bottom - height - bottom) / height);\n  }\n\n  if (!isRight && right >= finalScrollContainerRect.right - width) {\n    // Scroll Right\n    direction.x = Direction.Forward;\n    speed.x =\n      acceleration *\n      Math.abs((finalScrollContainerRect.right - width - right) / width);\n  } else if (!isLeft && left <= finalScrollContainerRect.left + width) {\n    // Scroll Left\n    direction.x = Direction.Backward;\n    speed.x =\n      acceleration *\n      Math.abs((left - width - finalScrollContainerRect.left) / width);\n  }\n\n  return {\n    direction,\n    speed,\n  };\n}\n","import {add} from '@dnd-kit/utilities';\n\nimport type {Coordinates} from '../../types';\nimport {getScrollCoordinates} from './getScrollCoordinates';\nimport {defaultCoordinates} from '../coordinates';\n\nexport function getScrollOffsets(scrollableAncestors: Element[]): Coordinates {\n  return scrollableAncestors.reduce<Coordinates>((acc, node) => {\n    return add(acc, getScrollCoordinates(node));\n  }, defaultCoordinates);\n}\n","import type {Coordinates, ClientRect, LayoutRect, ViewRect} from '../../types';\nimport {getScrollableAncestors, getScrollOffsets} from '../scroll';\nimport {defaultCoordinates} from '../coordinates';\n\nfunction getEdgeOffset(\n  node: HTMLElement | null,\n  parent: (Node & ParentNode) | null,\n  offset = defaultCoordinates\n): Coordinates {\n  if (!node || !(node instanceof HTMLElement)) {\n    return offset;\n  }\n\n  const nodeOffset = {\n    x: offset.x + node.offsetLeft,\n    y: offset.y + node.offsetTop,\n  };\n\n  if (node.offsetParent === parent) {\n    return nodeOffset;\n  }\n\n  return getEdgeOffset(node.offsetParent as HTMLElement, parent, nodeOffset);\n}\n\nexport function getElementLayout(element: HTMLElement): LayoutRect {\n  const {offsetWidth: width, offsetHeight: height} = element;\n  const {x: offsetLeft, y: offsetTop} = getEdgeOffset(element, null);\n\n  return {\n    width,\n    height,\n    offsetTop,\n    offsetLeft,\n  };\n}\n\nexport function getBoundingClientRect(\n  element: HTMLElement | Window\n): ClientRect {\n  if (element instanceof Window) {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n\n    return {\n      top: 0,\n      left: 0,\n      right: width,\n      bottom: height,\n      width,\n      height,\n      offsetTop: 0,\n      offsetLeft: 0,\n    };\n  }\n\n  const {offsetTop, offsetLeft} = getElementLayout(element);\n  const {\n    width,\n    height,\n    top,\n    bottom,\n    left,\n    right,\n  } = element.getBoundingClientRect();\n\n  return {\n    width,\n    height,\n    top,\n    bottom,\n    right,\n    left,\n    offsetTop,\n    offsetLeft,\n  };\n}\n\nexport function getViewRect(element: HTMLElement): ViewRect {\n  const {width, height, offsetTop, offsetLeft} = getElementLayout(element);\n  const scrollableAncestors = getScrollableAncestors(element.parentNode);\n  const scrollOffsets = getScrollOffsets(scrollableAncestors);\n\n  const top = offsetTop - scrollOffsets.y;\n  const left = offsetLeft - scrollOffsets.x;\n\n  return {\n    width,\n    height,\n    top,\n    bottom: top + height,\n    right: left + width,\n    left,\n    offsetTop,\n    offsetLeft,\n  };\n}\n","import type {LayoutRect, ViewRect} from '../../types';\n\nexport function isViewRect(entry: LayoutRect | ViewRect): entry is ViewRect {\n  return 'top' in entry;\n}\n","import {getMinValueIndex} from '../other';\nimport {distanceBetween} from '../coordinates';\nimport {isViewRect} from '../rect';\nimport type {LayoutRect} from '../../types';\nimport type {CollisionDetection} from './types';\n\n/**\n * Returns the coordinates of the corners of a given rectangle:\n * [TopLeft {x, y}, TopRight {x, y}, BottomLeft {x, y}, BottomRight {x, y}]\n */\n\nfunction cornersOfRectangle(\n  rect: LayoutRect,\n  left = rect.offsetLeft,\n  top = rect.offsetTop\n) {\n  return [\n    {\n      x: left,\n      y: top,\n    },\n    {\n      x: left + rect.width,\n      y: top,\n    },\n    {\n      x: left,\n      y: top + rect.height,\n    },\n    {\n      x: left + rect.width,\n      y: top + rect.height,\n    },\n  ];\n}\n\n/**\n * Returns the closest rectangle from an array of rectangles to the corners of\n * another rectangle.\n */\nexport const closestCorners: CollisionDetection = (entries, target) => {\n  const corners = cornersOfRectangle(target, target.left, target.top);\n\n  const distances = entries.map(([_, entry]) => {\n    const entryCorners = cornersOfRectangle(\n      entry,\n      isViewRect(entry) ? entry.left : undefined,\n      isViewRect(entry) ? entry.top : undefined\n    );\n    const distances = corners.reduce((accumulator, corner, index) => {\n      return accumulator + distanceBetween(entryCorners[index], corner);\n    }, 0);\n\n    return Number((distances / 4).toFixed(4));\n  });\n\n  const minValueIndex = getMinValueIndex(distances);\n\n  return entries[minValueIndex] ? entries[minValueIndex][0] : null;\n};\n","import {getMaxValueIndex} from '../other';\nimport type {LayoutRect, ViewRect} from '../../types';\nimport type {CollisionDetection} from './types';\n\n/**\n * Returns the intersecting rectangle area between two rectangles\n */\nfunction getIntersectionRatio(entry: LayoutRect, target: ViewRect): number {\n  const top = Math.max(target.top, entry.offsetTop);\n  const left = Math.max(target.left, entry.offsetLeft);\n  const right = Math.min(\n    target.left + target.width,\n    entry.offsetLeft + entry.width\n  );\n  const bottom = Math.min(\n    target.top + target.height,\n    entry.offsetTop + entry.height\n  );\n  const width = right - left;\n  const height = bottom - top;\n\n  if (left < right && top < bottom) {\n    const targetArea = target.width * target.height;\n    const entryArea = entry.width * entry.height;\n    const intersectionArea = width * height;\n    const intersectionRatio =\n      intersectionArea / (targetArea + entryArea - intersectionArea);\n\n    return Number(intersectionRatio.toFixed(4));\n  }\n\n  // Rectangles do not overlap, or overlap has an area of zero (edge/corner overlap)\n  return 0;\n}\n\n/**\n * Returns the rectangle that has the greatest intersection area with a given\n * rectangle in an array of rectangles.\n */\nexport const rectIntersection: CollisionDetection = (entries, target) => {\n  const intersections = entries.map(([_, entry]) =>\n    getIntersectionRatio(entry, target)\n  );\n\n  const maxValueIndex = getMaxValueIndex(intersections);\n\n  if (intersections[maxValueIndex] <= 0) {\n    return null;\n  }\n\n  return entries[maxValueIndex] ? entries[maxValueIndex][0] : null;\n};\n","export function getOwnerDocument(target: Event['target']) {\n  return target instanceof HTMLElement ? target.ownerDocument : document;\n}\n","import {omit} from '../utilities';\nimport {Action, Actions} from './actions';\nimport type {State} from './types';\n\nexport function getInitialState(): State {\n  return {\n    draggable: {\n      active: null,\n      initialCoordinates: {x: 0, y: 0},\n      lastEvent: null,\n      nodes: {},\n      translate: {x: 0, y: 0},\n    },\n    droppable: {\n      containers: {},\n    },\n  };\n}\n\nexport function reducer(state: State, action: Actions): State {\n  switch (action.type) {\n    case Action.DragStart:\n      return {\n        ...state,\n        draggable: {\n          ...state.draggable,\n          initialCoordinates: action.initialCoordinates,\n          active: action.active,\n          lastEvent: Action.DragStart,\n        },\n      };\n    case Action.DragMove:\n      if (!state.draggable.active) {\n        return state;\n      }\n\n      return {\n        ...state,\n        draggable: {\n          ...state.draggable,\n          translate: {\n            x: action.coordinates.x - state.draggable.initialCoordinates.x,\n            y: action.coordinates.y - state.draggable.initialCoordinates.y,\n          },\n        },\n      };\n    case Action.DragEnd:\n    case Action.DragCancel:\n      return {\n        ...state,\n        draggable: {\n          ...state.draggable,\n          active: null,\n          initialCoordinates: {x: 0, y: 0},\n          translate: {x: 0, y: 0},\n          lastEvent: action.type,\n        },\n      };\n\n    case Action.RegisterDroppable: {\n      const {element} = action;\n      const {id} = element;\n\n      return {\n        ...state,\n        droppable: {\n          ...state.droppable,\n          containers: {\n            ...state.droppable.containers,\n            [id]: element,\n          },\n        },\n      };\n    }\n\n    case Action.SetDroppableDisabled: {\n      const {id, disabled} = action;\n      const element = state.droppable.containers[id];\n\n      if (!element) {\n        return state;\n      }\n\n      return {\n        ...state,\n        droppable: {\n          ...state.droppable,\n          containers: {\n            ...state.droppable.containers,\n            [id]: {\n              ...element,\n              disabled,\n            },\n          },\n        },\n      };\n    }\n\n    case Action.UnregisterDroppable: {\n      const {id} = action;\n\n      return {\n        ...state,\n        droppable: {\n          ...state.droppable,\n          containers: omit(id, state.droppable.containers),\n        },\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n","import React, {useRef, useEffect} from 'react';\nimport {createPortal} from 'react-dom';\nimport {canUseDOM, useUniqueId} from '@dnd-kit/utilities';\nimport {HiddenText, LiveRegion, useAnnouncement} from '@dnd-kit/accessibility';\n\nimport {Announcements, ScreenReaderInstructions} from './types';\nimport {defaultAnnouncements} from './defaults';\nimport {UniqueIdentifier} from '../../types';\nimport {Action, State} from '../../store';\n\ninterface Props {\n  announcements?: Announcements;\n  activeId: UniqueIdentifier | null;\n  overId: UniqueIdentifier | null;\n  lastEvent: State['draggable']['lastEvent'];\n  screenReaderInstructions: ScreenReaderInstructions;\n  hiddenTextDescribedById: UniqueIdentifier;\n}\n\nexport function Accessibility({\n  announcements = defaultAnnouncements,\n  activeId,\n  overId,\n  lastEvent,\n  hiddenTextDescribedById,\n  screenReaderInstructions,\n}: Props) {\n  const {announce, entries} = useAnnouncement();\n  const tracked = useRef({\n    activeId,\n    overId,\n  });\n  const liveRegionId = useUniqueId(`DndLiveRegion`);\n\n  useEffect(() => {\n    const {\n      activeId: previousActiveId,\n      overId: previousOverId,\n    } = tracked.current;\n    let announcement: string | undefined;\n\n    if (!previousActiveId && activeId) {\n      announcement = announcements.onDragStart(activeId);\n    } else if (!activeId && previousActiveId) {\n      if (lastEvent === Action.DragEnd) {\n        announcement = announcements.onDragEnd(\n          previousActiveId,\n          previousOverId ?? undefined\n        );\n      } else if (lastEvent === Action.DragCancel) {\n        announcement = announcements.onDragCancel(previousActiveId);\n      }\n    } else if (activeId && previousActiveId && overId !== previousOverId) {\n      announcement = announcements.onDragOver(activeId, overId ?? undefined);\n    }\n\n    if (announcement) {\n      announce(announcement);\n    }\n\n    if (\n      tracked.current.overId !== overId ||\n      tracked.current.activeId !== activeId\n    ) {\n      tracked.current = {\n        activeId,\n        overId,\n      };\n    }\n  }, [announcements, announce, activeId, overId, lastEvent]);\n\n  return canUseDOM\n    ? createPortal(\n        <>\n          <HiddenText\n            id={hiddenTextDescribedById}\n            value={screenReaderInstructions.draggable}\n          />\n          <LiveRegion id={liveRegionId} entries={entries} />\n        </>,\n        document.body\n      )\n    : null;\n}\n","import {useCallback, useEffect, useRef} from 'react';\nimport {useInterval} from '@dnd-kit/utilities';\n\nimport {getScrollDirectionAndSpeed, defaultCoordinates} from '../../utilities';\nimport type {Coordinates, Direction, ViewRect} from '../../types';\n\ninterface Arguments {\n  disabled: boolean;\n  draggingRect: ViewRect | null;\n  interval?: number;\n  scrollableAncestors: Element[];\n  scrollableAncestorRects: ViewRect[];\n}\n\ninterface ScrollDirection {\n  x: 0 | Direction;\n  y: 0 | Direction;\n}\n\nexport function useAutoScroller({\n  disabled,\n  draggingRect,\n  interval = 5,\n  scrollableAncestors,\n  scrollableAncestorRects,\n}: Arguments) {\n  const [setAutoScrollInterval, clearAutoScrollInterval] = useInterval();\n  const scrollSpeed = useRef<Coordinates>({\n    x: 1,\n    y: 1,\n  });\n  const scrollDirection = useRef<ScrollDirection>(defaultCoordinates);\n  const scrollContainerRef = useRef<Element | null>(null);\n  const autoScroll = useCallback(() => {\n    const scrollContainer = scrollContainerRef.current;\n\n    if (!scrollContainer) {\n      return;\n    }\n\n    const scrollLeft = scrollSpeed.current.x * scrollDirection.current.x;\n    const scrollTop = scrollSpeed.current.y * scrollDirection.current.y;\n\n    scrollContainer.scrollBy(scrollLeft, scrollTop);\n  }, []);\n\n  useEffect(() => {\n    if (disabled || !scrollableAncestors.length || !draggingRect) {\n      clearAutoScrollInterval();\n      return;\n    }\n\n    for (const scrollContainer of scrollableAncestors) {\n      const index = scrollableAncestors.indexOf(scrollContainer);\n      const scrolllContainerRect = scrollableAncestorRects[index];\n\n      if (!scrolllContainerRect) {\n        continue;\n      }\n\n      const {direction, speed} = getScrollDirectionAndSpeed(\n        scrollContainer,\n        scrolllContainerRect,\n        draggingRect\n      );\n\n      scrollSpeed.current = speed;\n      scrollDirection.current = direction;\n\n      clearAutoScrollInterval();\n\n      if (speed.x > 0 || speed.y > 0) {\n        scrollContainerRef.current = scrollContainer;\n        setAutoScrollInterval(autoScroll, interval);\n\n        break;\n      }\n    }\n  }, [\n    autoScroll,\n    draggingRect,\n    clearAutoScrollInterval,\n    disabled,\n    setAutoScrollInterval,\n    scrollableAncestors,\n    scrollableAncestorRects,\n    interval,\n  ]);\n}\n","import {useLazyMemo} from '@dnd-kit/utilities';\nimport type {DraggableNode} from '../../store';\nimport {UniqueIdentifier} from '../../types';\n\nexport function useCachedNode(\n  draggableNode: DraggableNode | null,\n  active: UniqueIdentifier | null\n): DraggableNode['current'] {\n  return useLazyMemo(\n    (cachedNode) => {\n      if (active === null) {\n        return null;\n      }\n\n      // In some cases, the draggable node can unmount while dragging\n      // This is the case for virtualized lists. In those situations,\n      // we fall back to the last known value for that node.\n      return draggableNode?.current ?? cachedNode ?? null;\n    },\n    [draggableNode, active]\n  );\n}\n","import {useMemo} from 'react';\n\nimport type {SensorDescriptor, SensorHandler} from '../../sensors';\nimport type {\n  SyntheticListener,\n  SyntheticListeners,\n} from './useSyntheticListeners';\n\nexport function useCombineActivators(\n  sensors: SensorDescriptor<any>[],\n  getSyntheticHandler: (\n    handler: SensorHandler,\n    sensor: SensorDescriptor<any>\n  ) => SyntheticListener['handler']\n): SyntheticListeners {\n  return useMemo(\n    () =>\n      sensors.reduce<SyntheticListeners>((accumulator, sensor) => {\n        const {sensor: Sensor} = sensor;\n\n        const sensorActivators = Sensor.activators.map((activator) => ({\n          eventName: activator.eventName,\n          handler: getSyntheticHandler(activator.handler, sensor),\n        }));\n\n        return [...accumulator, ...sensorActivators];\n      }, []),\n    [sensors, getSyntheticHandler]\n  );\n}\n","import {useMemo} from 'react';\nimport type {Coordinates} from '../../types';\n\nexport function useFindElementFromPoint(\n  coordinates: Coordinates,\n  document: Document | undefined\n) {\n  // To-do: This is expensive and needs to be debounced\n  return useMemo(() => {\n    if (!document) {\n      return null;\n    }\n\n    return document.elementFromPoint(coordinates.x, coordinates.y);\n  }, [coordinates.x, coordinates.y, document]);\n}\n","import {useCallback, useEffect, useRef, useState} from 'react';\nimport {useLazyMemo} from '@dnd-kit/utilities';\n\nimport {getElementLayout} from '../../utilities';\nimport {DroppableContainers, LayoutRectMap} from '../../store/types';\n\nconst defaultValue: LayoutRectMap = new Map();\n\nexport function useLayoutRectMap(\n  containers: DroppableContainers,\n  disabled: boolean\n) {\n  const [willRecomputeLayouts, setWillRecomputeLayouts] = useState(false);\n  const containersRef = useRef(containers);\n  const recomputeLayouts = useCallback(() => {\n    setWillRecomputeLayouts(true);\n  }, []);\n  const layoutRectMap = useLazyMemo<LayoutRectMap>(\n    (previousValue) => {\n      if (disabled) {\n        return defaultValue;\n      }\n\n      if (\n        !previousValue ||\n        previousValue === defaultValue ||\n        containersRef.current !== containers ||\n        willRecomputeLayouts\n      ) {\n        for (let container of Object.values(containers)) {\n          if (!container) {\n            continue;\n          }\n\n          container.rect.current = container.node.current\n            ? getElementLayout(container.node.current)\n            : null;\n        }\n\n        return createLayoutRectMap(containers);\n      }\n\n      return previousValue;\n    },\n    [containers, disabled, willRecomputeLayouts]\n  );\n\n  useEffect(() => {\n    containersRef.current = containers;\n  }, [containers]);\n\n  useEffect(() => {\n    if (willRecomputeLayouts) {\n      setWillRecomputeLayouts(false);\n    }\n  }, [willRecomputeLayouts]);\n\n  return {layoutRectMap, recomputeLayouts, willRecomputeLayouts};\n}\n\nfunction createLayoutRectMap(\n  containers: DroppableContainers | null\n): LayoutRectMap {\n  const layoutRectMap: LayoutRectMap = new Map();\n\n  if (containers) {\n    for (const container of Object.values(containers)) {\n      if (!container) {\n        continue;\n      }\n\n      const {id, rect, disabled} = container;\n\n      if (disabled || rect.current == null) {\n        continue;\n      }\n\n      layoutRectMap.set(id, rect.current);\n    }\n  }\n\n  return layoutRectMap;\n}\n","import {useState, useCallback, useMemo, useRef, useEffect} from 'react';\nimport {add} from '@dnd-kit/utilities';\n\nimport {\n  defaultCoordinates,\n  getScrollableElement,\n  getScrollCoordinates,\n  getScrollOffsets,\n} from '../../utilities';\nimport type {Coordinates} from '../../types';\n\ntype ScrollCoordinates = Map<HTMLElement | Window, Coordinates>;\n\nexport function useScrollOffsets(elements: Element[]): Coordinates {\n  const [\n    scrollCoordinates,\n    setScrollCoordinates,\n  ] = useState<ScrollCoordinates | null>(null);\n  const prevElements = useRef(elements);\n\n  // To-do: Throttle the handleScroll callback\n  const handleScroll = useCallback((event: Event) => {\n    const scrollingElement = getScrollableElement(event.target);\n\n    if (!scrollingElement) {\n      return;\n    }\n\n    setScrollCoordinates((scrollCoordinates) => {\n      if (!scrollCoordinates) {\n        return null;\n      }\n\n      scrollCoordinates.set(\n        scrollingElement,\n        getScrollCoordinates(scrollingElement)\n      );\n\n      return new Map(scrollCoordinates);\n    });\n  }, []);\n\n  useEffect(() => {\n    const previousElements = prevElements.current;\n\n    if (elements !== previousElements) {\n      cleanup(previousElements);\n\n      const entries = elements\n        .map((element) => {\n          const scrollableElement = getScrollableElement(element);\n\n          if (scrollableElement) {\n            scrollableElement.addEventListener('scroll', handleScroll, {\n              passive: true,\n            });\n\n            return [\n              scrollableElement,\n              getScrollCoordinates(scrollableElement),\n            ] as const;\n          }\n\n          return null;\n        })\n        .filter(\n          (\n            entry\n          ): entry is [\n            HTMLElement | (Window & typeof globalThis),\n            Coordinates\n          ] => entry != null\n        );\n\n      setScrollCoordinates(entries.length ? new Map(entries) : null);\n\n      prevElements.current = elements;\n    }\n\n    return () => {\n      cleanup(elements);\n      cleanup(previousElements);\n    };\n\n    function cleanup(elements: Element[]) {\n      elements.forEach((element) => {\n        const scrollableElement = getScrollableElement(element);\n\n        scrollableElement?.removeEventListener('scroll', handleScroll);\n      });\n    }\n  }, [handleScroll, elements]);\n\n  return useMemo(() => {\n    if (elements.length) {\n      return scrollCoordinates\n        ? Array.from(scrollCoordinates.values()).reduce(\n            (acc, coordinates) => add(acc, coordinates),\n            defaultCoordinates\n          )\n        : getScrollOffsets(elements);\n    }\n\n    return defaultCoordinates;\n  }, [elements, scrollCoordinates]);\n}\n","import {useEffect, useRef} from 'react';\nimport {useLazyMemo} from '@dnd-kit/utilities';\n\nimport {getScrollableAncestors} from '../../utilities';\n\nconst defaultValue: Element[] = [];\n\nexport function useScrollableAncestors(node: Element | null) {\n  const previousNode = useRef(node);\n\n  const ancestors = useLazyMemo<Element[]>(\n    (previousValue) => {\n      if (!node) {\n        return defaultValue;\n      }\n\n      if (\n        previousValue &&\n        node &&\n        previousNode.current &&\n        node.parentNode === previousNode.current.parentNode\n      ) {\n        return previousValue;\n      }\n\n      return getScrollableAncestors(node);\n    },\n    [node]\n  );\n\n  useEffect(() => {\n    previousNode.current = node;\n  }, [node]);\n\n  return ancestors;\n}\n","import {useMemo} from 'react';\n\nimport type {SyntheticEventName, UniqueIdentifier} from '../../types';\n\nexport type SyntheticListener = {\n  eventName: SyntheticEventName;\n  handler: (event: React.SyntheticEvent, id: UniqueIdentifier) => void;\n};\n\nexport type SyntheticListeners = SyntheticListener[];\n\nexport type SyntheticListenerMap = Record<string, Function>;\n\nexport function useSyntheticListeners(\n  listeners: SyntheticListeners,\n  id: string\n): SyntheticListenerMap {\n  return useMemo(() => {\n    return listeners.reduce<SyntheticListenerMap>(\n      (acc, {eventName, handler}) => {\n        acc[eventName] = (event: React.SyntheticEvent) => {\n          handler(event, id);\n        };\n\n        return acc;\n      },\n      {} as SyntheticListenerMap\n    );\n  }, [listeners, id]);\n}\n","import {useRef} from 'react';\nimport {useLazyMemo} from '@dnd-kit/utilities';\n\nimport {\n  getBoundingClientRect,\n  getElementLayout,\n  getViewRect,\n} from '../../utilities';\nimport type {LayoutRect} from '../../types';\n\ntype RectFn<T, U> = (element: U) => T;\n\nexport const useClientRect = createUseRectFn(getBoundingClientRect);\nexport const useClientRects = createUseRectsFn(getBoundingClientRect);\nexport const useViewRect = createUseRectFn(getViewRect);\nexport const useLayoutRect = createUseRectFn(getElementLayout);\n\nfunction createUseRectFn<T = LayoutRect, U = HTMLElement>(\n  getRect: RectFn<T, U>\n) {\n  return function useClientRect(\n    element: U | null,\n    forceRecompute?: boolean\n  ): T | null {\n    const previousElement = useRef(element);\n\n    return useLazyMemo<T | null>(\n      (previousValue) => {\n        if (!element) {\n          return null;\n        }\n\n        if (\n          forceRecompute ||\n          (!previousValue && element) ||\n          element !== previousElement.current\n        ) {\n          if (element instanceof HTMLElement && element.parentNode == null) {\n            return null;\n          }\n\n          return getRect(element as U);\n        }\n\n        return previousValue ?? null;\n      },\n      [element, forceRecompute]\n    );\n  };\n}\n\nfunction createUseRectsFn<T = LayoutRect>(getRect: RectFn<T, HTMLElement>) {\n  const defaultValue: T[] = [];\n\n  return function useRects(elements: Element[], forceRecompute?: boolean): T[] {\n    const previousElements = useRef(elements);\n\n    return useLazyMemo<T[]>(\n      (previousValue) => {\n        if (!elements.length) {\n          return defaultValue;\n        }\n\n        if (\n          forceRecompute ||\n          (!previousValue && elements.length) ||\n          elements !== previousElements.current\n        ) {\n          return elements.map((element) => getRect(element as HTMLElement));\n        }\n\n        return previousValue ?? defaultValue;\n      },\n      [elements, forceRecompute]\n    );\n  };\n}\n","import {useMemo} from 'react';\n\nimport {Sensor, SensorDescriptor, SensorOptions} from './types';\n\nexport function useSensor<T extends SensorOptions>(\n  sensor: Sensor<T>,\n  options?: T\n): SensorDescriptor<T> {\n  return useMemo(\n    () => ({\n      sensor,\n      options: options ?? ({} as T),\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [sensor, options]\n  );\n}\n","import {useMemo} from 'react';\nimport {SensorDescriptor, SensorOptions} from './types';\n\nexport function useSensors(\n  ...sensors: (SensorDescriptor<any> | undefined | null)[]\n): SensorDescriptor<SensorOptions>[] {\n  return useMemo(\n    () =>\n      [...sensors].filter(\n        (sensor): sensor is SensorDescriptor<any> => sensor != null\n      ),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [...sensors]\n  );\n}\n","export class Listeners {\n  private listeners: {\n    eventName: string;\n    handler: EventListenerOrEventListenerObject;\n  }[] = [];\n\n  constructor(private target: HTMLElement | Document) {}\n\n  public add(\n    eventName: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: AddEventListenerOptions | false\n  ) {\n    this.target.addEventListener(eventName, handler, options);\n    this.listeners.push({eventName, handler});\n  }\n\n  public removeAll() {\n    this.listeners.forEach(({eventName, handler}) =>\n      this.target.removeEventListener(eventName, handler)\n    );\n  }\n}\n","import {getOwnerDocument} from '../../utilities';\n\nexport function getEventListenerTarget(\n  element: EventTarget | null\n): HTMLElement | Document {\n  return element instanceof HTMLElement ? element : getOwnerDocument(element);\n}\n","import type {Coordinates, UniqueIdentifier} from '../../types';\nimport type {SensorContext} from '../types';\n\nexport enum KeyboardCode {\n  Space = 'Space',\n  Down = 'ArrowDown',\n  Right = 'ArrowRight',\n  Left = 'ArrowLeft',\n  Up = 'ArrowUp',\n  Esc = 'Escape',\n  Enter = 'Enter',\n}\n\nexport type KeyboardCodes = {\n  start: KeyboardEvent['code'][];\n  cancel: KeyboardEvent['code'][];\n  end: KeyboardEvent['code'][];\n};\n\nexport type KeyboardCoordinateGetter = (\n  event: KeyboardEvent,\n  args: {\n    active: UniqueIdentifier;\n    currentCoordinates: Coordinates;\n    context: SensorContext;\n  }\n) => Coordinates | void;\n","import {KeyboardCoordinateGetter, KeyboardCode, KeyboardCodes} from './types';\n\nexport const defaultKeyboardCodes: KeyboardCodes = {\n  start: [KeyboardCode.Space, KeyboardCode.Enter],\n  cancel: [KeyboardCode.Esc],\n  end: [KeyboardCode.Space, KeyboardCode.Enter],\n};\n\nexport const defaultKeyboardCoordinateGetter: KeyboardCoordinateGetter = (\n  event,\n  {currentCoordinates}\n) => {\n  switch (event.code) {\n    case KeyboardCode.Right:\n      return {\n        ...currentCoordinates,\n        x: currentCoordinates.x + 25,\n      };\n    case KeyboardCode.Left:\n      return {\n        ...currentCoordinates,\n        x: currentCoordinates.x - 25,\n      };\n    case KeyboardCode.Down:\n      return {\n        ...currentCoordinates,\n        y: currentCoordinates.y + 25,\n      };\n    case KeyboardCode.Up:\n      return {\n        ...currentCoordinates,\n        y: currentCoordinates.y - 25,\n      };\n  }\n\n  return undefined;\n};\n","import {\n  add as getAdjustedCoordinates,\n  subtract as getCoordinatesDelta,\n} from '@dnd-kit/utilities';\n\nimport {Listeners} from '../utilities';\nimport type {SensorInstance, SensorProps, SensorOptions} from '../types';\nimport type {Coordinates} from '../../types';\n\nimport {KeyboardCoordinateGetter, KeyboardCode, KeyboardCodes} from './types';\nimport {\n  defaultKeyboardCodes,\n  defaultKeyboardCoordinateGetter,\n} from './defaults';\nimport {\n  defaultCoordinates,\n  getBoundingClientRect,\n  getOwnerDocument,\n  getScrollPosition,\n} from '../../utilities';\n\nexport interface KeyboardSensorOptions extends SensorOptions {\n  keyboardCodes?: KeyboardCodes;\n  coordinateGetter?: KeyboardCoordinateGetter;\n  scrollBehavior?: ScrollBehavior;\n}\n\nexport type KeyboardSensorProps = SensorProps<KeyboardSensorOptions>;\n\nexport class KeyboardSensor implements SensorInstance {\n  public autoScrollEnabled = false;\n  private coordinates: Coordinates = defaultCoordinates;\n  private listeners: Listeners;\n\n  constructor(private props: KeyboardSensorProps) {\n    const {\n      event: {target},\n    } = props;\n\n    this.props = props;\n    this.listeners = new Listeners(getOwnerDocument(target));\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n\n    this.attach();\n  }\n\n  private attach() {\n    this.handleStart();\n\n    setTimeout(() => this.listeners.add('keydown', this.handleKeyDown));\n  }\n\n  private handleStart() {\n    const {activeNode, onStart} = this.props;\n\n    if (!activeNode.current) {\n      throw new Error('Active draggable node is undefined');\n    }\n\n    const activeNodeRect = getBoundingClientRect(activeNode.current);\n    const coordinates = {\n      x: activeNodeRect.left,\n      y: activeNodeRect.top,\n    };\n\n    this.coordinates = coordinates;\n\n    onStart(coordinates);\n  }\n\n  private handleKeyDown(event: Event) {\n    if (event instanceof KeyboardEvent) {\n      const {coordinates} = this;\n      const {active, context, options} = this.props;\n      const {\n        keyboardCodes = defaultKeyboardCodes,\n        coordinateGetter = defaultKeyboardCoordinateGetter,\n        scrollBehavior = 'smooth',\n      } = options;\n      const {code} = event;\n\n      if (keyboardCodes.end.includes(code)) {\n        this.handleEnd(event);\n        return;\n      }\n\n      if (keyboardCodes.cancel.includes(code)) {\n        this.handleCancel(event);\n        return;\n      }\n\n      const newCoordinates = coordinateGetter(event, {\n        active,\n        context: context.current,\n        currentCoordinates: coordinates,\n      });\n\n      if (newCoordinates) {\n        const scrollDelta = {\n          x: 0,\n          y: 0,\n        };\n        const {scrollableAncestors} = context.current;\n        const scrollContainer = scrollableAncestors[0];\n\n        if (scrollContainer) {\n          const direction = event.code;\n          const coordinatesDelta = getCoordinatesDelta(\n            newCoordinates,\n            coordinates\n          );\n          const {\n            isTop,\n            isRight,\n            isLeft,\n            isBottom,\n            scrollElementRect,\n            maxScroll,\n            minScroll,\n          } = getScrollPosition(scrollContainer);\n\n          const clampedCoordinates = {\n            x: Math.min(\n              direction === KeyboardCode.Right\n                ? scrollElementRect.right - scrollElementRect.width / 2\n                : scrollElementRect.right,\n              Math.max(\n                direction === KeyboardCode.Right\n                  ? scrollElementRect.left\n                  : scrollElementRect.left + scrollElementRect.width / 2,\n                newCoordinates.x\n              )\n            ),\n            y: Math.min(\n              direction === KeyboardCode.Down\n                ? scrollElementRect.bottom - scrollElementRect.height / 2\n                : scrollElementRect.bottom,\n              Math.max(\n                direction === KeyboardCode.Down\n                  ? scrollElementRect.top\n                  : scrollElementRect.top + scrollElementRect.height / 2,\n                newCoordinates.y\n              )\n            ),\n          };\n\n          const canScrollX =\n            (direction === KeyboardCode.Right && !isRight) ||\n            (direction === KeyboardCode.Left && !isLeft);\n          const canScrollY =\n            (direction === KeyboardCode.Down && !isBottom) ||\n            (direction === KeyboardCode.Up && !isTop);\n\n          if (canScrollX && clampedCoordinates.x !== newCoordinates.x) {\n            const canFullyScrollToNewCoordinates =\n              (direction === KeyboardCode.Right &&\n                scrollContainer.scrollLeft + coordinatesDelta.x <=\n                  maxScroll.x) ||\n              (direction === KeyboardCode.Left &&\n                scrollContainer.scrollLeft + coordinatesDelta.x >= minScroll.x);\n\n            if (canFullyScrollToNewCoordinates) {\n              // We don't need to update coordinates, the scroll adjustment alone will trigger\n              // logic to auto-detect the new container we are over\n              scrollContainer.scrollBy({\n                left: coordinatesDelta.x,\n                behavior: scrollBehavior,\n              });\n              return;\n            }\n\n            scrollDelta.x =\n              direction === KeyboardCode.Right\n                ? scrollContainer.scrollLeft - maxScroll.x\n                : scrollContainer.scrollLeft - minScroll.x;\n\n            scrollContainer.scrollBy({\n              left: -scrollDelta.x,\n              behavior: scrollBehavior,\n            });\n          } else if (canScrollY && clampedCoordinates.y !== newCoordinates.y) {\n            const canFullyScrollToNewCoordinates =\n              (direction === KeyboardCode.Down &&\n                scrollContainer.scrollTop + coordinatesDelta.y <=\n                  maxScroll.y) ||\n              (direction === KeyboardCode.Up &&\n                scrollContainer.scrollTop + coordinatesDelta.y >= minScroll.y);\n\n            if (canFullyScrollToNewCoordinates) {\n              // We don't need to update coordinates, the scroll adjustment alone will trigger\n              // logic to auto-detect the new container we are over\n              scrollContainer.scrollBy({\n                top: coordinatesDelta.y,\n                behavior: scrollBehavior,\n              });\n              return;\n            }\n\n            scrollDelta.y =\n              direction === KeyboardCode.Down\n                ? scrollContainer.scrollTop - maxScroll.y\n                : scrollContainer.scrollTop - minScroll.y;\n\n            scrollContainer.scrollBy({\n              top: -scrollDelta.y,\n              behavior: scrollBehavior,\n            });\n          }\n        }\n\n        this.handleMove(\n          event,\n          getAdjustedCoordinates(newCoordinates, scrollDelta)\n        );\n      }\n    }\n  }\n\n  private handleMove(event: Event, coordinates: Coordinates) {\n    const {onMove} = this.props;\n\n    event.preventDefault();\n    onMove(coordinates);\n    this.coordinates = coordinates;\n  }\n\n  private handleEnd(event: Event) {\n    const {onEnd} = this.props;\n\n    event.preventDefault();\n    this.detach();\n    onEnd();\n  }\n\n  private handleCancel(event: Event) {\n    const {onCancel} = this.props;\n\n    event.preventDefault();\n    this.detach();\n    onCancel();\n  }\n\n  private detach() {\n    this.listeners.removeAll();\n  }\n\n  static activators = [\n    {\n      eventName: 'onKeyDown' as const,\n      handler: (\n        event: React.KeyboardEvent,\n        {keyboardCodes = defaultKeyboardCodes}: KeyboardSensorOptions\n      ) => {\n        const {code} = event.nativeEvent;\n\n        if (keyboardCodes.start.includes(code)) {\n          event.preventDefault();\n\n          return true;\n        }\n\n        return false;\n      },\n    },\n  ];\n}\n","import {subtract as getCoordinatesDelta} from '@dnd-kit/utilities';\n\nimport {getEventListenerTarget, Listeners} from '../utilities';\n\nimport {getEventCoordinates, getOwnerDocument} from '../../utilities';\nimport {KeyboardCode} from '../keyboard';\nimport type {SensorInstance, SensorProps, SensorOptions} from '../types';\nimport type {Coordinates} from '../../types';\n\ninterface DistanceConstraint {\n  distance: number;\n}\n\ninterface DelayConstraint {\n  delay: number;\n  tolerance: number;\n}\n\ninterface EventDescriptor {\n  name: keyof DocumentEventMap;\n  passive?: boolean;\n}\n\nexport interface PointerEventHandlers {\n  move: EventDescriptor;\n  end: EventDescriptor;\n}\n\nexport type PointerActivationConstraint = DistanceConstraint | DelayConstraint;\n\nfunction isDistanceConstraint(\n  constraint: PointerActivationConstraint\n): constraint is DistanceConstraint {\n  return Boolean(constraint && 'distance' in constraint);\n}\n\nfunction isDelayConstraint(\n  constraint: PointerActivationConstraint\n): constraint is DelayConstraint {\n  return Boolean(constraint && 'delay' in constraint);\n}\n\nexport interface PointerSensorOptions extends SensorOptions {\n  activationConstraint?: PointerActivationConstraint;\n}\n\nexport type PointerSensorProps = SensorProps<PointerSensorOptions>;\n\nenum EventName {\n  Keydown = 'keydown',\n}\n\nexport class AbstractPointerSensor implements SensorInstance {\n  public autoScrollEnabled = true;\n  private activated: boolean = false;\n  private initialCoordinates: Coordinates;\n  private timeoutId: NodeJS.Timeout | null = null;\n  private listeners: Listeners;\n  private ownerDocument: Document;\n\n  constructor(\n    private props: PointerSensorProps,\n    private events: PointerEventHandlers,\n    listenerTarget = getEventListenerTarget(props.event.target)\n  ) {\n    const {event} = props;\n\n    this.props = props;\n    this.events = events;\n    this.ownerDocument = getOwnerDocument(event.target);\n    this.listeners = new Listeners(listenerTarget);\n    this.initialCoordinates = getEventCoordinates(event);\n    this.handleStart = this.handleStart.bind(this);\n    this.handleMove = this.handleMove.bind(this);\n    this.handleEnd = this.handleEnd.bind(this);\n    this.handleKeydown = this.handleKeydown.bind(this);\n\n    this.attach();\n  }\n\n  private attach() {\n    const {\n      events,\n      props: {\n        options: {activationConstraint},\n      },\n    } = this;\n\n    this.listeners.add(events.move.name, this.handleMove, false);\n    this.listeners.add(events.end.name, this.handleEnd);\n\n    this.ownerDocument.addEventListener(EventName.Keydown, this.handleKeydown);\n\n    if (activationConstraint) {\n      if (isDistanceConstraint(activationConstraint)) {\n        return;\n      }\n\n      if (isDelayConstraint(activationConstraint)) {\n        this.timeoutId = setTimeout(\n          this.handleStart,\n          activationConstraint.delay\n        );\n        return;\n      }\n    }\n\n    this.handleStart();\n  }\n\n  private detach() {\n    this.listeners.removeAll();\n    this.ownerDocument.removeEventListener(\n      EventName.Keydown,\n      this.handleKeydown\n    );\n\n    if (this.timeoutId !== null) {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = null;\n    }\n  }\n\n  private handleStart() {\n    const {initialCoordinates} = this;\n    const {onStart} = this.props;\n\n    if (initialCoordinates) {\n      this.activated = true;\n\n      onStart(initialCoordinates);\n    }\n  }\n\n  private handleMove(event: Event) {\n    const {activated, initialCoordinates, props} = this;\n    const {\n      onMove,\n      options: {activationConstraint},\n    } = props;\n\n    if (!initialCoordinates) {\n      return;\n    }\n\n    const coordinates = getEventCoordinates(event);\n    const delta = getCoordinatesDelta(initialCoordinates, coordinates);\n    const combinedDelta = Math.abs(delta.x) + Math.abs(delta.y);\n\n    if (!activated && activationConstraint) {\n      // Constraint validation\n      if (isDelayConstraint(activationConstraint)) {\n        if (combinedDelta >= activationConstraint.tolerance) {\n          return this.handleCancel();\n        }\n\n        return;\n      }\n\n      if (isDistanceConstraint(activationConstraint)) {\n        if (combinedDelta >= activationConstraint.distance) {\n          return this.handleStart();\n        }\n\n        return;\n      }\n    }\n\n    if (event.cancelable) {\n      event.preventDefault();\n    }\n\n    onMove(coordinates);\n  }\n\n  private handleEnd() {\n    const {onEnd} = this.props;\n\n    this.detach();\n    onEnd();\n  }\n\n  private handleCancel() {\n    const {onCancel} = this.props;\n\n    this.detach();\n    onCancel();\n  }\n\n  private handleKeydown(event: KeyboardEvent) {\n    if (event.code === KeyboardCode.Esc) {\n      this.handleCancel();\n    }\n  }\n}\n","import {getOwnerDocument} from '../../utilities';\n\nimport {\n  AbstractPointerSensor,\n  PointerSensorProps,\n  PointerEventHandlers,\n} from './AbstractPointerSensor';\n\nconst events: PointerEventHandlers = {\n  move: {name: 'pointermove'},\n  end: {name: 'pointerup'},\n};\n\nexport class PointerSensor extends AbstractPointerSensor {\n  constructor(props: PointerSensorProps) {\n    const {event} = props;\n    // Pointer events stop firing if the target is unmounted while dragging\n    // Therefore we attach listeners to the owner document instead\n    const listenerTarget = getOwnerDocument(event.target);\n\n    super(props, events, listenerTarget);\n  }\n\n  static activators = [\n    {\n      eventName: 'onPointerDown' as const,\n      handler: ({nativeEvent}: React.PointerEvent) => {\n        if (!nativeEvent.isPrimary || nativeEvent.button !== 0) {\n          return false;\n        }\n\n        nativeEvent.preventDefault();\n\n        return true;\n      },\n    },\n  ];\n}\n","import {getOwnerDocument} from '../../utilities';\nimport {\n  AbstractPointerSensor,\n  PointerEventHandlers,\n  PointerSensorOptions,\n  PointerSensorProps,\n} from '../pointer';\n\nconst events: PointerEventHandlers = {\n  move: {name: 'mousemove'},\n  end: {name: 'mouseup'},\n};\n\nenum MouseButton {\n  RightClick = 2,\n}\n\nexport interface MouseSensorOptions extends PointerSensorOptions {}\n\nexport class MouseSensor extends AbstractPointerSensor {\n  constructor(props: PointerSensorProps) {\n    super(props, events, getOwnerDocument(props.event.target));\n  }\n\n  static activators = [\n    {\n      eventName: 'onMouseDown' as const,\n      handler: ({nativeEvent}: React.MouseEvent) => {\n        if (nativeEvent.button === MouseButton.RightClick) {\n          return false;\n        }\n\n        nativeEvent.preventDefault();\n\n        return true;\n      },\n    },\n  ];\n}\n","import React from 'react';\n\nimport {\n  AbstractPointerSensor,\n  PointerSensorProps,\n  PointerEventHandlers,\n  PointerSensorOptions,\n} from '../pointer';\n\nconst events: PointerEventHandlers = {\n  move: {name: 'touchmove'},\n  end: {name: 'touchend'},\n};\n\nexport interface TouchSensorOptions extends PointerSensorOptions {}\n\nexport class TouchSensor extends AbstractPointerSensor {\n  constructor(props: PointerSensorProps) {\n    super(props, events);\n  }\n\n  static activators = [\n    {\n      eventName: 'onTouchStart' as const,\n      handler: ({nativeEvent}: React.TouchEvent) => {\n        const {touches} = nativeEvent;\n\n        if (touches.length > 1) {\n          return false;\n        }\n\n        if (nativeEvent.cancelable) {\n          nativeEvent.preventDefault();\n        }\n\n        return true;\n      },\n    },\n  ];\n}\n","import type {FirstArgument, Transform} from '@dnd-kit/utilities';\n\nimport type {Modifiers, Modifier} from './types';\n\nexport function applyModifiers(\n  modifiers: Modifiers | undefined,\n  {transform, ...args}: FirstArgument<Modifier>\n): Transform {\n  return modifiers?.length\n    ? modifiers.reduce<Transform>((accumulator, modifier) => {\n        return modifier({\n          transform: accumulator,\n          ...args,\n        });\n      }, transform)\n    : transform;\n}\n","import React, {\n  memo,\n  createContext,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  add,\n  Transform,\n  useIsomorphicLayoutEffect,\n  useNodeRef,\n  useUniqueId,\n} from '@dnd-kit/utilities';\n\nimport {\n  Action,\n  Context,\n  DndContextDescriptor,\n  getInitialState,\n  reducer,\n} from '../../store';\nimport type {Coordinates, ViewRect, LayoutRect, Translate} from '../../types';\nimport {\n  useAutoScroller,\n  useCachedNode,\n  useCombineActivators,\n  useLayoutRectMap,\n  useScrollableAncestors,\n  useClientRect,\n  useClientRects,\n  useFindElementFromPoint,\n  useScrollOffsets,\n  useViewRect,\n  SyntheticListener,\n} from '../../hooks/utilities';\nimport {\n  KeyboardSensor,\n  PointerSensor,\n  Sensor,\n  SensorContext,\n  SensorDescriptor,\n  SensorHandler,\n  SensorInstance,\n} from '../../sensors';\nimport {\n  adjustScale,\n  CollisionDetection,\n  defaultCoordinates,\n  getAdjustedRect,\n  centerOfRectangle,\n  getRectDelta,\n  rectIntersection,\n} from '../../utilities';\nimport {applyModifiers, Modifiers} from '../../modifiers';\nimport type {\n  LayoutRectMap,\n  DraggableNode,\n  DraggableNodes,\n  DroppableContainers,\n} from '../../store/types';\nimport type {UniqueIdentifier} from '../../types';\nimport {\n  Accessibility,\n  Announcements,\n  screenReaderInstructions as defaultScreenReaderInstructions,\n  ScreenReaderInstructions,\n} from '../Accessibility';\n\ninterface Active {\n  id: UniqueIdentifier;\n}\n\nexport interface DragStartEvent {\n  active: Active;\n}\n\nexport interface DragMoveEvent {\n  active: Active;\n  delta: Translate;\n  draggingRect: ViewRect;\n  droppableRects: LayoutRectMap;\n  over: {\n    id: UniqueIdentifier;\n    rect: LayoutRect;\n  } | null;\n}\n\nexport interface DragOverEvent {\n  active: Active;\n  draggingRect: ViewRect;\n  droppableRects: LayoutRectMap;\n  over: {\n    id: UniqueIdentifier;\n    rect: LayoutRect;\n  } | null;\n}\n\nexport interface DragEndEvent {\n  active: Active;\n  delta: Translate;\n  over: {\n    id: UniqueIdentifier;\n  } | null;\n}\n\nexport type DragCancelEvent = DragEndEvent;\n\ninterface DndEvent extends Event {\n  dndKit?: {\n    capturedBy: Sensor<any>;\n  };\n}\n\ninterface Props {\n  autoScroll?: boolean;\n  announcements?: Announcements;\n  children?: React.ReactNode;\n  collisionDetection?: CollisionDetection;\n  screenReaderInstructions?: ScreenReaderInstructions;\n  sensors?: SensorDescriptor<any>[];\n  modifiers?: Modifiers;\n  onDragStart?(event: DragStartEvent): void;\n  onDragMove?(event: DragMoveEvent): void;\n  onDragOver?(event: DragOverEvent): void;\n  onDragEnd?(event: DragEndEvent): void;\n  onDragCancel?(event: DragCancelEvent): void;\n}\n\nconst defaultSensors = [\n  {sensor: PointerSensor, options: {}},\n  {sensor: KeyboardSensor, options: {}},\n];\n\nexport const ActiveDraggableContext = createContext<Transform>({\n  ...defaultCoordinates,\n  scaleX: 1,\n  scaleY: 1,\n});\n\nexport const DndContext = memo(function DndContext({\n  autoScroll = true,\n  announcements,\n  children,\n  sensors = defaultSensors,\n  collisionDetection = rectIntersection,\n  screenReaderInstructions = defaultScreenReaderInstructions,\n  modifiers,\n  ...props\n}: Props) {\n  const store = useReducer(reducer, undefined, getInitialState);\n  const [state, dispatch] = store;\n  const {\n    draggable: {active, lastEvent, nodes: draggableNodes, translate},\n    droppable: {containers: droppableContainers},\n  } = state;\n  const activeRef = useRef<UniqueIdentifier | null>(null);\n  const [activeSensor, setActiveSensor] = useState<SensorInstance | null>(null);\n  const [activatorEvent, setActivatorEvent] = useState<Event | null>(null);\n  const latestProps = useRef(props);\n  const draggableDescribedById = useUniqueId(`DndDescribedBy`);\n\n  const {\n    layoutRectMap: droppableRects,\n    recomputeLayouts,\n    willRecomputeLayouts,\n  } = useLayoutRectMap(droppableContainers, active === null);\n  const activeNode = useCachedNode(\n    getDraggableNode(active, draggableNodes),\n    active\n  );\n  const activeNodeRect = useViewRect(activeNode);\n  const activeNodeClientRect = useClientRect(activeNode);\n  const initialActiveNodeRectRef = useRef<ViewRect | null>(null);\n  const initialActiveNodeRect = initialActiveNodeRectRef.current;\n  const nodeRectDelta = getRectDelta(activeNodeRect, initialActiveNodeRect);\n  const tracked = useRef<{\n    active: UniqueIdentifier | null;\n    droppableRects: LayoutRectMap;\n    overId: UniqueIdentifier | null;\n    scrollAdjustedTransalte: Coordinates;\n    translatedRect: ViewRect | null;\n  }>({\n    active,\n    droppableRects,\n    overId: null,\n    scrollAdjustedTransalte: defaultCoordinates,\n    translatedRect: null,\n  });\n  const overNode = getDroppableNode(\n    tracked.current.overId,\n    droppableContainers\n  );\n  const windowRect = useClientRect(\n    activeNode ? activeNode.ownerDocument.defaultView : null\n  );\n  const containerNodeRect = useClientRect(\n    activeNode ? activeNode.parentElement : null\n  );\n  const scrollDetectionCoordinates = activeNodeRect\n    ? add(\n        centerOfRectangle(\n          activeNodeRect,\n          activeNodeRect.left,\n          activeNodeRect.top\n        ),\n        translate\n      )\n    : defaultCoordinates;\n  const detectedScrollElement = useFindElementFromPoint(\n    scrollDetectionCoordinates,\n    activeNode?.ownerDocument\n  );\n  const scrollTarget = active ? overNode ?? detectedScrollElement : null;\n  const scrollableAncestors = useScrollableAncestors(scrollTarget);\n  const scrollableAncestorRects = useClientRects(scrollableAncestors);\n\n  const [overlayNodeRef, setOverlayNodeRef] = useNodeRef();\n  const overlayNodeRect = useClientRect(\n    active ? overlayNodeRef.current : null,\n    willRecomputeLayouts\n  );\n\n  const modifiedTranslate = applyModifiers(modifiers, {\n    transform: {\n      x: translate.x - nodeRectDelta.x,\n      y: translate.y - nodeRectDelta.y,\n      scaleX: 1,\n      scaleY: 1,\n    },\n    activeNodeRect: activeNodeClientRect,\n    draggingNodeRect: overlayNodeRect ?? activeNodeClientRect,\n    containerNodeRect,\n    overlayNodeRect,\n    scrollableAncestors,\n    scrollableAncestorRects,\n    windowRect,\n  });\n\n  const scrolllAdjustment = useScrollOffsets(scrollableAncestors);\n\n  const scrollAdjustedTransalte = add(modifiedTranslate, scrolllAdjustment);\n\n  const translatedRect = activeNodeRect\n    ? getAdjustedRect(activeNodeRect, modifiedTranslate)\n    : null;\n\n  const collisionRect = translatedRect\n    ? getAdjustedRect(translatedRect, scrolllAdjustment)\n    : null;\n\n  const overId =\n    active && collisionRect\n      ? collisionDetection(Array.from(droppableRects.entries()), collisionRect)\n      : null;\n  const overNodeRect = getLayoutRect(overId, droppableRects);\n  const over = useMemo(\n    () =>\n      overId && overNodeRect\n        ? {\n            id: overId,\n            rect: overNodeRect,\n          }\n        : null,\n    [overId, overNodeRect]\n  );\n\n  const transform = adjustScale(\n    modifiedTranslate,\n    overNodeRect,\n    activeNodeRect\n  );\n\n  const sensorContext = useRef<SensorContext>({\n    activeNode,\n    collisionRect,\n    droppableRects,\n    droppableContainers,\n    over,\n    scrollableAncestors,\n    translatedRect,\n  });\n\n  const instantiateSensor = useCallback(\n    (\n      event: React.SyntheticEvent,\n      {sensor: Sensor, options}: SensorDescriptor<any>\n    ) => {\n      if (!activeRef.current) {\n        return;\n      }\n\n      const activeNode = draggableNodes[activeRef.current];\n\n      if (!activeNode) {\n        return;\n      }\n\n      const sensorInstance = new Sensor({\n        active: activeRef.current,\n        activeNode,\n        event: event.nativeEvent,\n        options,\n        // Sensors need to be instantiated with refs for arguments that change over time\n        // otherwise they are frozen in time with the stale arguments\n        context: sensorContext,\n        onStart: (initialCoordinates) => {\n          const id = activeRef.current;\n\n          if (!id) {\n            return;\n          }\n\n          const {onDragStart} = latestProps.current;\n\n          dispatch({\n            type: Action.DragStart,\n            initialCoordinates,\n            active: id,\n          });\n\n          onDragStart?.({active: {id}});\n        },\n        onMove(coordinates) {\n          dispatch({\n            type: Action.DragMove,\n            coordinates,\n          });\n        },\n        onEnd: createHandler(Action.DragEnd),\n        onCancel: createHandler(Action.DragCancel),\n      });\n\n      setActiveSensor(sensorInstance);\n      setActivatorEvent(event.nativeEvent);\n\n      function createHandler(type: Action.DragEnd | Action.DragCancel) {\n        return function handler() {\n          const {overId, scrollAdjustedTransalte} = tracked.current;\n          const props = latestProps.current;\n          const activeId = activeRef.current;\n\n          if (activeId) {\n            activeRef.current = null;\n          }\n\n          dispatch({type});\n          setActiveSensor(null);\n          setActivatorEvent(null);\n\n          const handler =\n            type === Action.DragEnd ? props.onDragEnd : props.onDragCancel;\n\n          if (activeId) {\n            handler?.({\n              active: {\n                id: activeId,\n              },\n              delta: scrollAdjustedTransalte,\n              over: overId\n                ? {\n                    id: overId,\n                  }\n                : null,\n            });\n          }\n        };\n      }\n    },\n    [dispatch, draggableNodes]\n  );\n\n  const bindActivatorToSensorInstantiator = useCallback(\n    (\n      handler: SensorHandler,\n      sensor: SensorDescriptor<any>\n    ): SyntheticListener['handler'] => {\n      return (event, active) => {\n        const nativeEvent = event.nativeEvent as DndEvent;\n\n        if (\n          // No active draggable\n          activeRef.current !== null ||\n          // Event has already been captured\n          nativeEvent.dndKit ||\n          nativeEvent.defaultPrevented\n        ) {\n          return;\n        }\n\n        if (handler(event, sensor.options) === true) {\n          nativeEvent.dndKit = {\n            capturedBy: sensor.sensor,\n          };\n\n          activeRef.current = active;\n          instantiateSensor(event, sensor);\n        }\n      };\n    },\n    [instantiateSensor]\n  );\n\n  const activators = useCombineActivators(\n    sensors,\n    bindActivatorToSensorInstantiator\n  );\n\n  useIsomorphicLayoutEffect(\n    () => {\n      latestProps.current = props;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    Object.values(props)\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (!active) {\n      return;\n    }\n\n    // Recompute rects right after dragging has begun in case they have changed\n    recomputeLayouts();\n  }, [active, recomputeLayouts]);\n\n  useEffect(() => {\n    if (!active) {\n      initialActiveNodeRectRef.current = null;\n    }\n\n    if (active && activeNodeRect && !initialActiveNodeRectRef.current) {\n      initialActiveNodeRectRef.current = activeNodeRect;\n    }\n  }, [activeNodeRect, active]);\n\n  useEffect(() => {\n    const activeId = activeRef.current;\n\n    if (!activeId) {\n      return;\n    }\n\n    const {onDragMove} = latestProps.current;\n    const {overId, droppableRects, translatedRect} = tracked.current;\n\n    if (!onDragMove || !translatedRect) {\n      return;\n    }\n    const overNodeRect = getLayoutRect(overId, droppableRects);\n\n    onDragMove({\n      active: {\n        id: activeId,\n      },\n      draggingRect: translatedRect,\n      droppableRects,\n      delta: {\n        x: scrollAdjustedTransalte.x,\n        y: scrollAdjustedTransalte.y,\n      },\n      over:\n        overId && overNodeRect\n          ? {\n              id: overId,\n              rect: overNodeRect,\n            }\n          : null,\n    });\n  }, [scrollAdjustedTransalte.x, scrollAdjustedTransalte.y]);\n\n  useEffect(() => {\n    if (!activeRef.current) {\n      return;\n    }\n\n    const {active, droppableRects, translatedRect} = tracked.current;\n\n    if (!active || !translatedRect) {\n      return;\n    }\n\n    const {onDragOver} = latestProps.current;\n    const overNodeRect = getLayoutRect(overId, droppableRects);\n\n    onDragOver?.({\n      active: {\n        id: active,\n      },\n      droppableRects: tracked.current.droppableRects,\n      draggingRect: translatedRect,\n      over:\n        overId && overNodeRect\n          ? {\n              id: overId,\n              rect: overNodeRect,\n            }\n          : null,\n    });\n  }, [overId]);\n\n  useEffect(() => {\n    tracked.current = {\n      active,\n      droppableRects,\n      overId,\n      translatedRect,\n      scrollAdjustedTransalte,\n    };\n  }, [active, droppableRects, overId, translatedRect, scrollAdjustedTransalte]);\n\n  useIsomorphicLayoutEffect(() => {\n    sensorContext.current = {\n      activeNode,\n      collisionRect,\n      droppableRects,\n      droppableContainers,\n      over,\n      scrollableAncestors,\n      translatedRect,\n    };\n  }, [\n    activeNode,\n    collisionRect,\n    droppableRects,\n    droppableContainers,\n    over,\n    scrollableAncestors,\n    translatedRect,\n  ]);\n\n  useAutoScroller({\n    draggingRect: translatedRect,\n    disabled: !autoScroll || !activeSensor?.autoScrollEnabled,\n    scrollableAncestors,\n    scrollableAncestorRects,\n  });\n\n  const contextValue = useMemo(() => {\n    const memoizedContext: DndContextDescriptor = {\n      active,\n      activeNode,\n      activeNodeRect,\n      activeNodeClientRect,\n      activatorEvent,\n      activators,\n      ariaDescribedById: {\n        draggable: draggableDescribedById,\n      },\n      overlayNode: {\n        nodeRef: overlayNodeRef,\n        rect: overlayNodeRect,\n        setRef: setOverlayNodeRef,\n      },\n      containerNodeRect,\n      dispatch,\n      draggableNodes,\n      droppableContainers,\n      droppableRects,\n      over,\n      recomputeLayouts,\n      scrollableAncestors,\n      scrollableAncestorRects,\n      willRecomputeLayouts,\n      windowRect,\n    };\n\n    return memoizedContext;\n  }, [\n    active,\n    activeNode,\n    activeNodeClientRect,\n    activeNodeRect,\n    activatorEvent,\n    activators,\n    containerNodeRect,\n    overlayNodeRect,\n    overlayNodeRef,\n    dispatch,\n    draggableNodes,\n    draggableDescribedById,\n    droppableContainers,\n    droppableRects,\n    over,\n    recomputeLayouts,\n    scrollableAncestors,\n    scrollableAncestorRects,\n    setOverlayNodeRef,\n    willRecomputeLayouts,\n    windowRect,\n  ]);\n\n  return (\n    <>\n      <Context.Provider value={contextValue}>\n        <ActiveDraggableContext.Provider value={transform}>\n          {children}\n        </ActiveDraggableContext.Provider>\n      </Context.Provider>\n      <Accessibility\n        announcements={announcements}\n        activeId={active}\n        overId={overId}\n        lastEvent={lastEvent}\n        hiddenTextDescribedById={draggableDescribedById}\n        screenReaderInstructions={screenReaderInstructions}\n      />\n    </>\n  );\n});\n\nfunction getDroppableNode(\n  id: UniqueIdentifier | null,\n  droppableContainers: DroppableContainers\n): HTMLElement | null {\n  return id ? droppableContainers[id]?.node.current ?? null : null;\n}\n\nfunction getDraggableNode(\n  id: UniqueIdentifier | null,\n  droppableContainers: DraggableNodes\n): DraggableNode | null {\n  return id ? droppableContainers[id] ?? null : null;\n}\n\nfunction getLayoutRect(\n  id: UniqueIdentifier | null,\n  layoutRectMap: LayoutRectMap\n): LayoutRect | null {\n  return id ? layoutRectMap.get(id) ?? null : null;\n}\n","import {createContext, useContext, useEffect} from 'react';\nimport {Transform, useNodeRef} from '@dnd-kit/utilities';\n\nimport {Context} from '../store';\nimport {ActiveDraggableContext} from '../components/DndContext';\nimport {useSyntheticListeners, SyntheticListenerMap} from './utilities';\n\nexport interface UseDraggableArguments {\n  id: string;\n  disabled?: boolean;\n  attributes?: {\n    role?: string;\n    roleDescription?: string;\n    tabIndex?: number;\n  };\n}\n\nexport type DraggableSyntheticListeners = SyntheticListenerMap | undefined;\n\nconst NullContext = createContext<any>(null);\n\nconst defaultRole = 'button';\n\nexport function useDraggable({\n  id,\n  disabled = false,\n  attributes,\n}: UseDraggableArguments) {\n  const {\n    active,\n    activeNodeRect,\n    activatorEvent,\n    ariaDescribedById,\n    draggableNodes,\n    droppableRects,\n    activators,\n    over,\n  } = useContext(Context);\n  const {role = defaultRole, roleDescription = 'draggable', tabIndex = 0} =\n    attributes ?? {};\n  const isDragging = Boolean(active === id);\n  const transform: Transform | null = useContext(\n    isDragging ? ActiveDraggableContext : NullContext\n  );\n  const [node, setNodeRef] = useNodeRef();\n  const listeners = useSyntheticListeners(activators, id);\n\n  useEffect(\n    () => {\n      draggableNodes[id] = node;\n\n      return () => {\n        delete draggableNodes[id];\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [draggableNodes, id]\n  );\n\n  return {\n    active,\n    activeNodeRect,\n    activatorEvent,\n    attributes: {\n      role,\n      tabIndex,\n      'aria-pressed': isDragging && role === defaultRole ? true : undefined,\n      'aria-roledescription': roleDescription,\n      'aria-describedby': ariaDescribedById.draggable,\n    },\n    droppableRects,\n    isDragging,\n    listeners: disabled ? undefined : listeners,\n    node,\n    over,\n    setNodeRef,\n    transform,\n  };\n}\n","import {ContextType, useContext} from 'react';\nimport {Context} from '../store';\n\nexport function useDndContext() {\n  return useContext(Context);\n}\n\nexport type UseDndContextReturnValue = ContextType<typeof Context>;\n","import {useContext, useEffect, useRef} from 'react';\nimport {useIsomorphicLayoutEffect, useNodeRef} from '@dnd-kit/utilities';\n\nimport {Context, Action, Data} from '../store';\nimport type {LayoutRect} from '../types';\n\nexport interface UseDroppableArguments {\n  id: string;\n  disabled?: boolean;\n  data?: Data;\n}\n\nconst defaultData: Data = {};\n\nexport function useDroppable({\n  data = defaultData,\n  disabled = false,\n  id,\n}: UseDroppableArguments) {\n  const {dispatch, over} = useContext(Context);\n  const rect = useRef<LayoutRect | null>(null);\n  const [nodeRef, setNodeRef] = useNodeRef();\n  const dataRef = useRef(data);\n\n  useIsomorphicLayoutEffect(() => {\n    if (dataRef.current !== data) {\n      dataRef.current = data;\n    }\n  }, [data]);\n\n  useIsomorphicLayoutEffect(\n    () => {\n      dispatch({\n        type: Action.RegisterDroppable,\n        element: {\n          id,\n          disabled,\n          node: nodeRef,\n          rect,\n          data: dataRef,\n        },\n      });\n\n      return () =>\n        dispatch({\n          type: Action.UnregisterDroppable,\n          id,\n        });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [id]\n  );\n\n  useEffect(\n    () => {\n      dispatch({\n        type: Action.SetDroppableDisabled,\n        id,\n        disabled,\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [disabled]\n  );\n\n  return {\n    rect,\n    isOver: over?.id === id,\n    node: nodeRef,\n    over,\n    setNodeRef,\n  };\n}\n","import {useRef} from 'react';\nimport {Transform, useLazyMemo} from '@dnd-kit/utilities';\n\nimport type {ViewRect} from '../../../types';\n\nexport function useDerivedTransform(\n  transform: Transform,\n  rect: ViewRect | null,\n  overlayNode: HTMLElement | null\n) {\n  const prevRect = useRef(rect);\n\n  return useLazyMemo<Transform | undefined>(\n    (previousValue) => {\n      const initial = prevRect.current;\n\n      if (rect !== initial) {\n        if (rect && initial) {\n          const layoutHasChanged =\n            initial.left !== rect.left || initial.top !== rect.top;\n\n          if (layoutHasChanged && !previousValue) {\n            const overlayNodeRect = overlayNode?.getBoundingClientRect();\n\n            if (overlayNodeRect) {\n              const delta = {\n                ...transform,\n                x: overlayNodeRect.left - rect.left,\n                y: overlayNodeRect.top - rect.top,\n              };\n\n              return delta;\n            }\n          }\n        }\n\n        prevRect.current = rect;\n      }\n\n      return undefined;\n    },\n    [rect, transform, overlayNode]\n  );\n}\n","import {useEffect, useState} from 'react';\nimport {CSS, Transform, useIsomorphicLayoutEffect} from '@dnd-kit/utilities';\n\nimport {UniqueIdentifier} from '../../../types';\nimport {DraggableNodes} from '../../../store';\nimport {getViewRect} from '../../../utilities';\n\nexport interface DropAnimation {\n  duration: number;\n  easing: string;\n}\n\ninterface Arguments {\n  activeId: UniqueIdentifier | null;\n  animate: boolean;\n  adjustScale: boolean;\n  draggableNodes: DraggableNodes;\n  duration: DropAnimation['duration'] | undefined;\n  easing: DropAnimation['easing'] | undefined;\n  node: HTMLElement | null;\n  transform: Transform | undefined;\n}\n\nexport function useDropAnimation({\n  animate,\n  adjustScale,\n  activeId,\n  draggableNodes,\n  duration,\n  easing,\n  node,\n  transform,\n}: Arguments) {\n  const [dropAnimationComplete, setDropAnimationComplete] = useState(false);\n\n  useEffect(() => {\n    const shouldPerformDropAnimation = transform\n      ? Boolean(Math.abs(transform.x) || Math.abs(transform.y))\n      : false;\n\n    if (\n      !animate ||\n      !activeId ||\n      !easing ||\n      !duration ||\n      !shouldPerformDropAnimation\n    ) {\n      if (animate) {\n        setDropAnimationComplete(true);\n      }\n\n      return;\n    }\n\n    requestAnimationFrame(() => {\n      const finalNode = draggableNodes[activeId]?.current;\n\n      if (transform && node && finalNode && finalNode.parentNode !== null) {\n        const fromNode = node.children.length > 1 ? node : node.children[0];\n\n        if (fromNode) {\n          const from = fromNode.getBoundingClientRect();\n          const to = getViewRect(finalNode);\n          const delta = {\n            x: from.left - to.left,\n            y: from.top - to.top,\n          };\n\n          if (Math.abs(delta.x) || Math.abs(delta.y)) {\n            const scaleDelta = {\n              scaleX: adjustScale\n                ? (to.width * transform.scaleX) / from.width\n                : 1,\n              scaleY: adjustScale\n                ? (to.height * transform.scaleY) / from.height\n                : 1,\n            };\n            const finalTransform = CSS.Transform.toString({\n              x: transform.x - delta.x,\n              y: transform.y - delta.y,\n              ...scaleDelta,\n            });\n            const originalOpacity = finalNode.style.opacity;\n\n            finalNode.style.opacity = '0';\n            node\n              .animate(\n                [\n                  {\n                    transform: CSS.Transform.toString(transform),\n                  },\n                  {\n                    transform: finalTransform,\n                  },\n                ],\n                {\n                  easing,\n                  duration,\n                }\n              )\n              .finished.then(() => {\n                setDropAnimationComplete(true);\n\n                if (finalNode) {\n                  finalNode.style.opacity = originalOpacity;\n                }\n              });\n            return;\n          }\n        }\n      }\n\n      setDropAnimationComplete(true);\n    });\n  }, [\n    animate,\n    activeId,\n    adjustScale,\n    draggableNodes,\n    duration,\n    easing,\n    node,\n    transform,\n  ]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (dropAnimationComplete) {\n      setDropAnimationComplete(false);\n    }\n  }, [dropAnimationComplete]);\n\n  return dropAnimationComplete;\n}\n","import React, {useContext, useEffect, useRef} from 'react';\nimport {CSS} from '@dnd-kit/utilities';\n\nimport {getRelativeTransformOrigin} from '../../utilities';\nimport {applyModifiers, Modifiers} from '../../modifiers';\nimport {ActiveDraggableContext} from '../DndContext';\nimport {useDndContext} from '../../hooks';\nimport {useDerivedTransform, useDropAnimation, DropAnimation} from './hooks';\n\ntype TransitionGetter = (\n  activatorEvent: Event | null\n) => React.CSSProperties['transition'] | undefined;\n\nexport interface Props {\n  adjustScale?: boolean;\n  children?: React.ReactNode;\n  className?: string;\n  dropAnimation?: DropAnimation | null | undefined;\n  style?: React.CSSProperties;\n  transition?: string | TransitionGetter;\n  modifiers?: Modifiers;\n  wrapperElement?: keyof JSX.IntrinsicElements;\n  zIndex?: number;\n}\n\nconst defaultTransition: TransitionGetter = (activatorEvent) => {\n  const isKeyboardActivator = activatorEvent instanceof KeyboardEvent;\n\n  return isKeyboardActivator ? 'transform 250ms ease' : undefined;\n};\n\nconst defaultDropAnimation: DropAnimation = {\n  duration: 250,\n  easing: 'ease',\n};\n\nexport const DragOverlay = React.memo(\n  ({\n    adjustScale = false,\n    children,\n    dropAnimation = defaultDropAnimation,\n    transition = defaultTransition,\n    modifiers,\n    wrapperElement = 'div',\n    className,\n    zIndex = 999,\n  }: Props) => {\n    const {\n      active,\n      activeNodeRect,\n      activeNodeClientRect,\n      containerNodeRect,\n      draggableNodes,\n      activatorEvent,\n      overlayNode,\n      scrollableAncestors,\n      scrollableAncestorRects,\n      windowRect,\n    } = useDndContext();\n    const transform = useContext(ActiveDraggableContext);\n    const modifiedTransform = applyModifiers(modifiers, {\n      transform,\n      activeNodeRect: activeNodeClientRect,\n      overlayNodeRect: overlayNode.rect,\n      draggingNodeRect: overlayNode.rect,\n      containerNodeRect,\n      scrollableAncestors,\n      scrollableAncestorRects,\n      windowRect,\n    });\n    const derivedTransform = useDerivedTransform(\n      modifiedTransform,\n      activeNodeRect,\n      overlayNode.nodeRef.current\n    );\n    const isDragging = active !== null;\n    const intermediateTransform = derivedTransform ?? modifiedTransform;\n    const finalTransform = adjustScale\n      ? intermediateTransform\n      : {\n          ...intermediateTransform,\n          scaleX: 1,\n          scaleY: 1,\n        };\n    const style: React.CSSProperties | undefined = activeNodeRect\n      ? {\n          position: 'fixed',\n          width: activeNodeRect.width,\n          height: activeNodeRect.height,\n          top: activeNodeRect.top,\n          left: activeNodeRect.left,\n          zIndex,\n          transform: CSS.Transform.toString(finalTransform),\n          touchAction: 'none',\n          pointerEvents: 'none',\n          transformOrigin:\n            adjustScale && activatorEvent\n              ? getRelativeTransformOrigin(\n                  activatorEvent as MouseEvent | KeyboardEvent | TouchEvent,\n                  activeNodeRect\n                )\n              : undefined,\n          transition: derivedTransform\n            ? undefined\n            : typeof transition === 'function'\n            ? transition(activatorEvent)\n            : transition,\n        }\n      : undefined;\n    const attributes = isDragging\n      ? {\n          style,\n          children,\n          className,\n          transform: finalTransform,\n        }\n      : undefined;\n    const attributesSnapshot = useRef(attributes);\n    const derivedAttributes = attributes ?? attributesSnapshot.current;\n    const {children: finalChildren, transform: _, ...otherAttributes} =\n      derivedAttributes ?? {};\n    const prevActive = useRef(active);\n    const dropAnimationComplete = useDropAnimation({\n      animate: Boolean(dropAnimation && prevActive.current && !active),\n      adjustScale,\n      activeId: prevActive.current,\n      draggableNodes,\n      duration: dropAnimation?.duration,\n      easing: dropAnimation?.easing,\n      node: overlayNode.nodeRef.current,\n      transform: attributesSnapshot.current?.transform,\n    });\n    const shouldRender = Boolean(\n      finalChildren && (children || (dropAnimation && !dropAnimationComplete))\n    );\n\n    useEffect(() => {\n      if (prevActive.current !== active) {\n        prevActive.current = active;\n      }\n\n      if (active && attributesSnapshot.current !== attributes) {\n        attributesSnapshot.current = attributes;\n      }\n    }, [active, attributes]);\n\n    useEffect(() => {\n      if (dropAnimationComplete) {\n        attributesSnapshot.current = undefined;\n      }\n    }, [dropAnimationComplete]);\n\n    if (!shouldRender) {\n      return null;\n    }\n\n    return React.createElement(\n      wrapperElement,\n      {\n        ...otherAttributes,\n        ref: overlayNode.setRef,\n      },\n      finalChildren\n    );\n  }\n);\n"],"names":["screenReaderInstructions","draggable","defaultAnnouncements","onDragStart","id","onDragOver","overId","onDragEnd","onDragCancel","Action","getMaxValueIndex","array","getValueIndex","value","tracked","getMinValueIndex","comparator","length","index","i","noop","omit","elements","other","Context","createContext","activatorEvent","active","activeNode","activeNodeRect","activeNodeClientRect","activators","ariaDescribedById","overlayNode","nodeRef","current","rect","setRef","containerNodeRect","dispatch","draggableNodes","droppableRects","Map","droppableContainers","over","scrollableAncestors","scrollableAncestorRects","recomputeLayouts","windowRect","willRecomputeLayouts","centerOfRectangle","left","top","offsetLeft","offsetTop","x","width","y","height","defaultCoordinates","Object","freeze","distanceBetween","p1","p2","Math","sqrt","pow","isTouchEvent","event","window","TouchEvent","isMouseEvent","MouseEvent","type","includes","getEventCoordinates","touches","clientX","clientY","changedTouches","getRelativeTransformOrigin","KeyboardEvent","eventCoordinates","transformOrigin","closestCenter","rects","centerRect","distances","map","minValueIndex","adjustScale","transform","rect1","rect2","scaleX","scaleY","getRectDelta","createRectAdjustmentFn","modifier","adjustViewRect","viewRect","adjustments","reduce","acc","adjustment","bottom","right","getAdjustedRect","isScrollable","node","computedStyle","getComputedStyle","overflowRegex","properties","find","property","test","isFixed","elem","currentElement","fixed","style","position","parentElement","getScrollableAncestors","element","scrollParents","findScrollableAncestors","Document","scrollingElement","push","HTMLElement","SVGElement","parentNode","getScrollableElement","canUseDOM","document","getScrollCoordinates","Window","scrollX","scrollY","scrollLeft","scrollTop","Direction","getScrollElementRect","innerWidth","innerHeight","getBoundingClientRect","getScrollPosition","scrollingContainer","scrollElementRect","minScroll","maxScroll","scrollWidth","scrollHeight","isTop","isLeft","isBottom","isRight","isDocumentScrollingElement","getScrollDirectionAndSpeed","scrollContainer","scrollContainerRect","acceleration","clientHeight","clientWidth","finalScrollContainerRect","direction","speed","Backward","abs","Forward","getScrollOffsets","add","getEdgeOffset","parent","offset","nodeOffset","offsetParent","getElementLayout","offsetWidth","offsetHeight","getViewRect","scrollOffsets","isViewRect","entry","cornersOfRectangle","closestCorners","entries","target","corners","entryCorners","undefined","accumulator","corner","Number","toFixed","getIntersectionRatio","max","min","targetArea","entryArea","intersectionArea","intersectionRatio","rectIntersection","intersections","maxValueIndex","getOwnerDocument","ownerDocument","getInitialState","initialCoordinates","lastEvent","nodes","translate","droppable","containers","reducer","state","action","DragStart","DragMove","coordinates","DragEnd","DragCancel","RegisterDroppable","SetDroppableDisabled","disabled","UnregisterDroppable","Accessibility","announcements","activeId","hiddenTextDescribedById","useAnnouncement","announce","useRef","liveRegionId","useUniqueId","useEffect","previousActiveId","previousOverId","announcement","createPortal","React","HiddenText","LiveRegion","body","useAutoScroller","draggingRect","interval","useInterval","setAutoScrollInterval","clearAutoScrollInterval","scrollSpeed","scrollDirection","scrollContainerRef","autoScroll","useCallback","scrollBy","indexOf","scrolllContainerRect","useCachedNode","draggableNode","useLazyMemo","cachedNode","useCombineActivators","sensors","getSyntheticHandler","useMemo","sensor","Sensor","sensorActivators","activator","eventName","handler","useFindElementFromPoint","elementFromPoint","defaultValue","useLayoutRectMap","useState","setWillRecomputeLayouts","containersRef","layoutRectMap","previousValue","values","container","createLayoutRectMap","set","useScrollOffsets","scrollCoordinates","setScrollCoordinates","prevElements","handleScroll","previousElements","cleanup","scrollableElement","addEventListener","passive","filter","forEach","removeEventListener","Array","from","useScrollableAncestors","previousNode","ancestors","useSyntheticListeners","listeners","useClientRect","createUseRectFn","useClientRects","createUseRectsFn","useViewRect","getRect","forceRecompute","previousElement","useRects","useSensor","options","useSensors","Listeners","removeAll","getEventListenerTarget","KeyboardCode","defaultKeyboardCodes","start","Space","Enter","cancel","Esc","end","defaultKeyboardCoordinateGetter","currentCoordinates","code","Right","Left","Down","Up","KeyboardSensor","props","handleKeyDown","bind","attach","handleStart","setTimeout","onStart","Error","context","keyboardCodes","coordinateGetter","scrollBehavior","handleEnd","handleCancel","newCoordinates","scrollDelta","coordinatesDelta","getCoordinatesDelta","clampedCoordinates","canScrollX","canScrollY","canFullyScrollToNewCoordinates","behavior","handleMove","getAdjustedCoordinates","onMove","preventDefault","onEnd","detach","onCancel","nativeEvent","isDistanceConstraint","constraint","Boolean","isDelayConstraint","EventName","AbstractPointerSensor","events","listenerTarget","handleKeydown","activationConstraint","move","name","Keydown","timeoutId","delay","clearTimeout","activated","delta","combinedDelta","tolerance","distance","cancelable","PointerSensor","isPrimary","button","MouseButton","MouseSensor","RightClick","TouchSensor","applyModifiers","modifiers","args","defaultSensors","ActiveDraggableContext","DndContext","memo","children","collisionDetection","defaultScreenReaderInstructions","store","useReducer","activeRef","activeSensor","setActiveSensor","setActivatorEvent","latestProps","draggableDescribedById","getDraggableNode","initialActiveNodeRectRef","initialActiveNodeRect","nodeRectDelta","scrollAdjustedTransalte","translatedRect","overNode","getDroppableNode","defaultView","scrollDetectionCoordinates","detectedScrollElement","scrollTarget","useNodeRef","overlayNodeRef","setOverlayNodeRef","overlayNodeRect","modifiedTranslate","draggingNodeRect","scrolllAdjustment","collisionRect","overNodeRect","getLayoutRect","sensorContext","instantiateSensor","sensorInstance","createHandler","bindActivatorToSensorInstantiator","dndKit","defaultPrevented","capturedBy","useIsomorphicLayoutEffect","onDragMove","autoScrollEnabled","contextValue","memoizedContext","Provider","get","NullContext","defaultRole","useDraggable","attributes","useContext","role","roleDescription","tabIndex","isDragging","setNodeRef","useDndContext","defaultData","useDroppable","data","dataRef","isOver","useDerivedTransform","prevRect","initial","layoutHasChanged","useDropAnimation","animate","duration","easing","dropAnimationComplete","setDropAnimationComplete","shouldPerformDropAnimation","requestAnimationFrame","finalNode","fromNode","to","scaleDelta","finalTransform","CSS","Transform","toString","originalOpacity","opacity","finished","then","defaultTransition","isKeyboardActivator","defaultDropAnimation","DragOverlay","dropAnimation","transition","wrapperElement","className","zIndex","modifiedTransform","derivedTransform","intermediateTransform","touchAction","pointerEvents","attributesSnapshot","derivedAttributes","finalChildren","_","otherAttributes","prevActive","shouldRender","createElement","ref"],"mappings":"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"}